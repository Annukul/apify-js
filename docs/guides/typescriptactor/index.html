<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Typescript Actors · Apify SDK</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Apify SDK supports Typescript by covering public APIs with type declarations. This"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Typescript Actors · Apify SDK"/><meta property="og:type" content="website"/><meta property="og:url" content="https://sdk.apify.com/"/><meta property="og:description" content="Apify SDK supports Typescript by covering public APIs with type declarations. This"/><meta property="og:image" content="https://sdk.apify.com/img/apify_logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://sdk.apify.com/img/apify_logo.png"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai-sublime.min.css"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/apify_logo.svg" alt="Apify SDK"/><h2 class="headerTitleWithLogo">Apify SDK</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class="siteNavGroupActive"><a href="/docs/guides/motivation" target="_self">Guide</a></li><li class=""><a href="/docs/examples/basiccrawler" target="_self">Examples</a></li><li class="siteNavGroupActive"><a href="/docs/api/apify" target="_self">Reference</a></li><li class=""><a href="https://github.com/apifytech/apify-js" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Guide</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Guide</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/guides/motivation">Motivation</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/gettingstarted">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/quickstart">Quick Start</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/whatisanactor">What is an Actor</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/guides/typescriptactor">Typescript Actors</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/environmentvariables">Environment Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/datastorage">Data Storage</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/puppeteerliveview">Puppeteer Live View</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/sessionmanagement">Session Management</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Reference</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/api/apify">Apify</a></li><li class="navListItem"><a class="navItem" href="/docs/api/autoscaledpool">AutoscaledPool</a></li><li class="navListItem"><a class="navItem" href="/docs/api/basiccrawler">BasicCrawler</a></li><li class="navListItem"><a class="navItem" href="/docs/api/cheeriocrawler">CheerioCrawler</a></li><li class="navListItem"><a class="navItem" href="/docs/api/dataset">Dataset</a></li><li class="navListItem"><a class="navItem" href="/docs/api/keyvaluestore">KeyValueStore</a></li><li class="navListItem"><a class="navItem" href="/docs/api/liveviewserver">LiveViewServer</a></li><li class="navListItem"><a class="navItem" href="/docs/api/pseudourl">PseudoUrl</a></li><li class="navListItem"><a class="navItem" href="/docs/api/puppeteercrawler">PuppeteerCrawler</a></li><li class="navListItem"><a class="navItem" href="/docs/api/puppeteerpool">PuppeteerPool</a></li><li class="navListItem"><a class="navItem" href="/docs/api/request">Request</a></li><li class="navListItem"><a class="navItem" href="/docs/api/requestlist">RequestList</a></li><li class="navListItem"><a class="navItem" href="/docs/api/requestqueue">RequestQueue</a></li><li class="navListItem"><a class="navItem" href="/docs/api/sessionpool">SessionPool</a></li><li class="navListItem"><a class="navItem" href="/docs/api/session">Session</a></li><li class="navListItem"><a class="navItem" href="/docs/api/utils">utils</a></li><li class="navListItem"><a class="navItem" href="/docs/api/log">utils.log</a></li><li class="navListItem"><a class="navItem" href="/docs/api/puppeteer">utils.puppeteer</a></li><li class="navListItem"><a class="navItem" href="/docs/api/social">utils.social</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Typescript Actors</h1></header><article><div><span><p>Apify SDK supports Typescript by covering public APIs with type declarations. This
allows writing code with auto-completion for Typedcript and Javascript code alike.
Besides that, actors written in Typescript can take advantage of compile-time
type-checking and avoid many mistakes.</p>
<h1><a class="anchor" aria-hidden="true" id="setting-up-typescript-project"></a><a href="#setting-up-typescript-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting up Typescript project</h1>
<p>To use Typescript in your actors, you'll need the following prerequisities.</p>
<ol>
<li><p>Typescript compiler <code>tsc</code> installed somewhere:</p>
<pre><code class="hljs css language-shell script"><span class="token function">npm</span> <span class="token function">install</span> --dev typescript
</code></pre>
<p>Type can be a development dependency in your project, as shown above. There's no
need to pollute your production environment or your system's package repository
with Typescript.</p></li>
<li><p>A build script invoking <code>tsc</code> and a correctly specified <code>main</code> entry point defined
in your <code>package.json</code>:</p>
<pre><code class="hljs css language-json"><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"tsc"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"build/main.js"</span>
<span class="token punctuation">}</span>
</code></pre></li>
<li><p>Type declarations for NodeJS, and optionally Cheerio, or Puppeteer (or both), so
you can take advantage of type-checking in all the features you'll use:</p>
<pre><code class="hljs css language-shell script"><span class="token function">npm</span> <span class="token function">install</span> --dev @types/node
<span class="token function">npm</span> <span class="token function">install</span> --dev @types/cheerio
<span class="token function">npm</span> <span class="token function">install</span> --dev @types/puppeteer
</code></pre>
<p>If you're using other Javascript packages in your actor, you'll want to include their
type declarations too (if they are available).</p></li>
<li><p>Typescript configuration file allowing <code>tsc</code> to understand your project layout and
the features used in your project and a targeted language level:</p>
<pre><code class="hljs css language-json"><span class="token punctuation">{</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"es2018"</span><span class="token punctuation">,</span>
        <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"commonjs"</span><span class="token punctuation">,</span>
        <span class="token property">"moduleResolution"</span><span class="token operator">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span>
        <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"es2018"</span><span class="token punctuation">,</span>
            <span class="token string">"es2018.asynciterable"</span><span class="token punctuation">,</span>
            <span class="token string">"dom"</span><span class="token punctuation">,</span>
            <span class="token string">"dom.iterable"</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"types"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"node"</span><span class="token punctuation">,</span>
            <span class="token string">"cheerio"</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"esModuleInterop"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">"outDir"</span><span class="token operator">:</span> <span class="token string">"build/"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"src/"</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>NOTE: You'll need to mention <code>cheerio</code> in <code>tsconfig.json</code> explicitly, but you don't
need to do so for <code>puppeteer</code>. The reason is that the <code>cheerio</code> module exports only
one function. Puppeteer's type declarations explicitly export all the types required.</p></li>
</ol>
<h1><a class="anchor" aria-hidden="true" id="auto-completion"></a><a href="#auto-completion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Auto-completion</h1>
<p>IDE auto-completion should work in most places. That's true even if you are writting
actors in pure Javascript. For time constraints, we left out the amendment of an
internal API for the time being, and these need to be added as SDK developers write
new and enhance old code.</p>
<h1><a class="anchor" aria-hidden="true" id="sdk-documentation"></a><a href="#sdk-documentation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SDK Documentation</h1>
<p>SDK documentation has grown a lot. There is a new API Reference section and one
sub-section:</p>
<ul>
<li><strong>Compiler options</strong> in the <strong>Type definitions</strong> sidebar - Holds documentation for
all constructible types in SDK.</li>
<li><strong>User-Functions</strong> sidebar - Holds documentation for user-provided functions like
<code>CheerioHandlePage</code>, <code>PuppeteerHandlePage</code>, <code>DatasetConsumer</code>, <code>DatasetMapper</code>, etc.
and their associated value-types <code>CheerioHandlePageInput</code>, etc.</li>
</ul>
<p>Expanding and enhancing documentation in those new places and adding more
details may be a potential priority.</p>
<h1><a class="anchor" aria-hidden="true" id="problems"></a><a href="#problems" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Problems</h1>
<p>Typescript sometimes generates invalid or incorrect declarations from JSDoc comments
until Typescript developers fix these problems. This needs to be handled in the future,
though all critical errors have been avoided or fixed already. Examples:</p>
<ul>
<li>Typescript does not handle <code>@extends</code> and <code>@typedef {BaseType}</code> as expected</li>
<li>In <code>types/session_pool/session_pool.d.ts</code>, it adds methods from the base-class
<code>EventEmitter</code> and changes their return types, so they are not compatible with the
<code>EventEmitter</code> (i.e., <code>addListener(): SessionPool</code>, instead of <code>addListener(): this</code>).</li>
</ul>
<h1><a class="anchor" aria-hidden="true" id="how-to-launchpuppeteer"></a><a href="#how-to-launchpuppeteer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to <code>launchPuppeteer()</code></h1>
<p>We are not able to <code>@extend</code> puppeteer's <code>LaunchOptions</code> as mentioned above and
JSDoc considers intersection types a syntactic error.
For this reason we left out the original launch options from our declarations and
let users to handle types in his code.</p>
<p>You can just cast a as PuppeteerOptions after the object, as such:</p>
<pre><code class="hljs css language-typescript"><span class="token comment">// manually import the types from puppeteer</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> PuppeteerOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'puppeteer'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> LaunchPuppeteerOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'apify'</span>

Apify<span class="token punctuation">.</span><span class="token function">launchPuppeteer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token keyword">as</span> PuppeteerOptions <span class="token operator">&amp;</span> LaunchPuppeteerOptions<span class="token punctuation">)</span>
<span class="token comment">// should show all available options intersected</span>
</code></pre>
<p>or slap an <code>as any</code> for limited time</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/guides/whatisanactor"><span class="arrow-prev">← </span><span>What is an Actor</span></a><a class="docs-next button" href="/docs/guides/environmentvariables"><span>Environment Variables</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/apify_logo.svg" alt="Apify SDK" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/guides/motivation">Guide</a><a href="/docs/examples/basiccrawler">Examples</a><a href="/docs/api/apify">Reference</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/apify" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/apify" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://www.facebook.com/apifytech" target="_blank" rel="noreferrer noopener">Facebook</a></div><div><h5>More</h5><a href="https://apify.com" target="_blank">Apify Cloud</a><a href="https://docusaurus.io" target="_blank">Docusaurus</a><a href="https://github.com/apifytech/apify-js" target="_blank">GitHub</a></div></section><section class="copyright">Copyright © 2020 Apify Technologies s.r.o.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '64ce2544769e34add0e6402688c86e92',
                indexName: 'apify_sdk',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>