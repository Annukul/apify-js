<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>BrowserCrawler · Apify SDK</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;a name=&quot;browsercrawler&quot;&gt;&lt;/a&gt;"/><meta name="docsearch:version" content="0.22.4"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="BrowserCrawler · Apify SDK"/><meta property="og:type" content="website"/><meta property="og:url" content="https://sdk.apify.com/"/><meta property="og:description" content="&lt;a name=&quot;browsercrawler&quot;&gt;&lt;/a&gt;"/><meta property="og:image" content="https://sdk.apify.com/img/apify_logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://sdk.apify.com/img/apify_logo.png"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai-sublime.min.css"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/apify_logo.svg" alt="Apify SDK"/><h2 class="headerTitleWithLogo">Apify SDK</h2></a><a href="/versions"><h3>0.22.4</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="/docs/guides/motivation" target="_self">Guide</a></li><li class=""><a href="/docs/examples/crawl-multiple-urls" target="_self">Examples</a></li><li class=""><a href="/docs/api/apify" target="_self">API Reference</a></li><li class=""><a href="https://github.com/apify/apify-js" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">BrowserCrawler</h1></header><article><div><span><p><a name="browsercrawler"></a></p>
<p>Provides a simple framework for parallel crawling of web pages using headless browsers with <a href="https://github.com/puppeteer/puppeteer" target="_blank" rel="noopener">Puppeteer</a> and
<a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener">Playwright</a>. The URLs to crawl are fed either from a static list of URLs or from a dynamic queue of URLs
enabling recursive crawling of websites.</p>
<p>Since <code>BrowserCrawler</code> uses headless or even headfull browsers to download web pages and extract data, it is useful for crawling of websites that
require to execute JavaScript. If the target website doesn't need JavaScript, consider using <a href="../api/cheerio-crawler"><code>CheerioCrawler</code></a>, which
downloads the pages using raw HTTP requests and is about 10x faster. @TODO: more?</p>
<p>The source URLs are represented using <a href="../api/request"><code>Request</code></a> objects that are fed from <a href="../api/request-list"><code>RequestList</code></a> or
<a href="../api/request-queue"><code>RequestQueue</code></a> instances provided by the
<a href="../typedefs/browser-crawler-options#requestlist"><code>BrowserCrawlerOptions.requestList</code></a> or
<a href="../typedefs/browser-crawler-options#requestqueue"><code>BrowserCrawlerOptions.requestQueue</code></a> constructor options, respectively.</p>
<p>If both <a href="../typedefs/browser-crawler-options#requestlist"><code>BrowserCrawlerOptions.requestList</code></a> and
<a href="../typedefs/browser-crawler-options#requestqueue"><code>BrowserCrawlerOptions.requestQueue</code></a> are used, the instance first processes URLs from the
<a href="../api/request-list"><code>RequestList</code></a> and automatically enqueues all of them to <a href="../api/request-queue"><code>RequestQueue</code></a> before it starts their
processing. This ensures that a single URL is not crawled multiple times.</p>
<p>The crawler finishes when there are no more <a href="../api/request"><code>Request</code></a> objects to crawl.</p>
<p><code>BrowserCrawler</code> opens a new browser page (i.e. tab or window) for each <a href="../api/request"><code>Request</code></a> object to crawl and then calls the function
provided by user as the <a href="../typedefs/browser-crawler-options#handlepagefunction"><code>BrowserCrawlerOptions.handlePageFunction</code></a> option.</p>
<p>New pages are only opened when there is enough free CPU and memory available, using the functionality provided by the
<a href="../api/autoscaled-pool"><code>AutoscaledPool</code></a> class. All <a href="../api/autoscaled-pool"><code>AutoscaledPool</code></a> configuration options can be passed to the
<a href="../typedefs/browser-crawler-options#autoscaledpooloptions"><code>BrowserCrawlerOptions.autoscaledPoolOptions</code></a> parameter of the <code>BrowserCrawler</code>
constructor. For user convenience, the <code>minConcurrency</code> and <code>maxConcurrency</code> <a href="../typedefs/autoscaled-pool-options"><code>AutoscaledPoolOptions</code></a> are
available directly in the <code>BrowserCrawler</code> constructor.</p>
<p>Note that the pool of browser instances is internally managed by the <code>BrowserPool</code> class.</p>
<p><strong>Example usage:</strong></p>
<p><strong>Todo:</strong>: ```javascript const crawler = new Apify.PuppeteerCrawler({ requestList, handlePageFunction: async ({ page, request }) =&gt; { // This function
is called to extract data from a single web page // 'page' is an instance of Puppeteer.Page with page.goto(request.url) already called // 'request' is
an instance of Request class with information about the page to load await Apify.pushData({ title: await page.title(), url: request.url, succeeded:
true, }) }, handleFailedRequestFunction: async ({ request }) =&gt; { // This function is called when the crawling of a request failed too many times
await Apify.pushData({ url: request.url, succeeded: false, errors: request.errorMessages, }) }, });</p>
<p>await crawler.run();</p>
<pre><code class="hljs">## Properties
### <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">stats</span><span class="token template-punctuation string">`</span></span>
<span class="token operator">**</span>Type<span class="token operator">**</span><span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Statistics</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>statistics<span class="token punctuation">)</span>

Contains statistics about the current run<span class="token punctuation">.</span>

<span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span>

### <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">requestList</span><span class="token template-punctuation string">`</span></span>
<span class="token operator">**</span>Type<span class="token operator">**</span><span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">RequestList</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>request<span class="token operator">-</span>list<span class="token punctuation">)</span>

<span class="token constant">A</span> reference to the underlying <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">RequestList</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>request<span class="token operator">-</span>list<span class="token punctuation">)</span> <span class="token keyword">class</span> <span class="token class-name">that</span> manages the crawler's <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Request</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>request<span class="token punctuation">)</span>s<span class="token punctuation">.</span>
 Only available <span class="token keyword">if</span> used by the crawler<span class="token punctuation">.</span>

<span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span>

### <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">requestQueue</span><span class="token template-punctuation string">`</span></span>
<span class="token operator">**</span>Type<span class="token operator">**</span><span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">RequestQueue</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>request<span class="token operator">-</span>queue<span class="token punctuation">)</span>

<span class="token constant">A</span> reference to the underlying <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">RequestQueue</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>request<span class="token operator">-</span>queue<span class="token punctuation">)</span> <span class="token keyword">class</span> <span class="token class-name">that</span> manages the crawler's <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Request</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>request<span class="token punctuation">)</span>s<span class="token punctuation">.</span>
 Only available <span class="token keyword">if</span> used by the crawler<span class="token punctuation">.</span>

<span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span>

### <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">sessionPool</span><span class="token template-punctuation string">`</span></span>
<span class="token operator">**</span>Type<span class="token operator">**</span><span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">SessionPool</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>session<span class="token operator">-</span>pool<span class="token punctuation">)</span>

<span class="token constant">A</span> reference to the underlying <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">SessionPool</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>session<span class="token operator">-</span>pool<span class="token punctuation">)</span> <span class="token keyword">class</span> <span class="token class-name">that</span> manages the crawler's <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Session</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>session<span class="token punctuation">)</span>s<span class="token punctuation">.</span>
 Only available <span class="token keyword">if</span> used by the crawler<span class="token punctuation">.</span>

<span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span>

### <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">proxyConfiguration</span><span class="token template-punctuation string">`</span></span>
<span class="token operator">**</span>Type<span class="token operator">**</span><span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ProxyConfiguration</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>proxy<span class="token operator">-</span>configuration<span class="token punctuation">)</span>

<span class="token constant">A</span> reference to the underlying <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ProxyConfiguration</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>proxy<span class="token operator">-</span>configuration<span class="token punctuation">)</span> <span class="token keyword">class</span> <span class="token class-name">that</span> manages the crawler's proxies<span class="token punctuation">.</span>
 Only available <span class="token keyword">if</span> used by the crawler<span class="token punctuation">.</span>

<span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span>

### <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">browserPool</span><span class="token template-punctuation string">`</span></span>
<span class="token operator">**</span>Type<span class="token operator">**</span><span class="token operator">:</span>  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">BrowserPool</span><span class="token template-punctuation string">`</span></span>

<span class="token constant">A</span> reference to the underlying <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">BrowserPool</span><span class="token template-punctuation string">`</span></span> <span class="token keyword">class</span> <span class="token class-name">that</span> manages the crawler's browsers<span class="token punctuation">.</span>
 For more information about it<span class="token punctuation">,</span> see the <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">browser-pool</span><span class="token template-punctuation string">`</span></span> module<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>apify<span class="token operator">/</span>browser<span class="token operator">-</span>pool<span class="token punctuation">)</span><span class="token punctuation">.</span>

<span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span>

### <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">autoscaledPool</span><span class="token template-punctuation string">`</span></span>
<span class="token operator">**</span>Type<span class="token operator">**</span><span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">AutoscaledPool</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>autoscaled<span class="token operator">-</span>pool<span class="token punctuation">)</span>

<span class="token constant">A</span> reference to the underlying <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">AutoscaledPool</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>autoscaled<span class="token operator">-</span>pool<span class="token punctuation">)</span> <span class="token keyword">class</span> <span class="token class-name">that</span> manages the concurrency <span class="token keyword">of</span> the crawler<span class="token punctuation">.</span>
 Note that <span class="token keyword">this</span> property is only initialized after calling the <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">CheerioCrawler.run()</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>cheerio<span class="token operator">-</span>crawler#run<span class="token punctuation">)</span> <span class="token keyword">function</span><span class="token punctuation">.</span>
 You can use it to change the concurrency settings on the fly<span class="token punctuation">,</span>
 to pause the crawler by calling <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">AutoscaledPool.pause()</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>autoscaled<span class="token operator">-</span>pool#pause<span class="token punctuation">)</span>
 or to abort it by calling <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">AutoscaledPool.abort()</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>api<span class="token operator">/</span>autoscaled<span class="token operator">-</span>pool#abort<span class="token punctuation">)</span><span class="token punctuation">.</span>


<span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span>

<span class="token operator">&lt;</span>a name<span class="token operator">=</span><span class="token string">"browsercrawler"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>

## <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">new BrowserCrawler(options)</span><span class="token template-punctuation string">`</span></span>
<span class="token operator">**</span>Parameters<span class="token operator">**</span><span class="token operator">:</span>

<span class="token operator">-</span> <span class="token operator">**</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">options</span><span class="token template-punctuation string">`</span></span><span class="token operator">**</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">BrowserCrawlerOptions</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>typedefs<span class="token operator">/</span>browser<span class="token operator">-</span>crawler<span class="token operator">-</span>options<span class="token punctuation">)</span> <span class="token operator">-</span> All <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">BrowserCrawler</span><span class="token template-punctuation string">`</span></span> parameters are passed via an options object<span class="token punctuation">.</span>


<span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span>

<span class="token operator">&lt;</span>a name<span class="token operator">=</span><span class="token string">"_handlenavigationtimeout"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>

## <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">browserCrawler._handleNavigationTimeout(crawlingContext, error)</span><span class="token template-punctuation string">`</span></span>
Marks session bad <span class="token keyword">in</span> <span class="token keyword">case</span> <span class="token keyword">of</span> navigation timeout<span class="token punctuation">.</span>

<span class="token operator">**</span>Parameters<span class="token operator">**</span><span class="token operator">:</span>

<span class="token operator">-</span> <span class="token operator">**</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">crawlingContext</span><span class="token template-punctuation string">`</span></span><span class="token operator">**</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">object</span><span class="token template-punctuation string">`</span></span>
<span class="token operator">-</span> <span class="token operator">**</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">error</span><span class="token template-punctuation string">`</span></span><span class="token operator">**</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error</span><span class="token template-punctuation string">`</span></span>


<span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/apify_logo.svg" alt="Apify SDK" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/guides/motivation">Guide</a><a href="/docs/examples/crawl-multiple-urls">Examples</a><a href="/docs/api/apify">API Reference</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/apify" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/apify" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://www.facebook.com/apifytech" target="_blank" rel="noreferrer noopener">Facebook</a></div><div><h5>More</h5><a href="https://apify.com" target="_blank">Apify Cloud</a><a href="https://docusaurus.io" target="_blank">Docusaurus</a><a href="https://github.com/apify/apify-js" target="_blank">GitHub</a></div></section><section class="copyright">Copyright © 2021 Apify Technologies s.r.o.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '64ce2544769e34add0e6402688c86e92',
                indexName: 'apify_sdk',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>